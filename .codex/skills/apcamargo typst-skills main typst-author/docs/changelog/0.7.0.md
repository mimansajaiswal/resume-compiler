# 0.7.0

## Text and Layout

- Added support for floating figures through the [`placement`](/docs/reference/model/figure/#parameters-placement) argument on the figure function
- Added support for arbitrary floating content through the [`float`](/docs/reference/layout/place/#parameters-float) argument on the place function
- Added support for loading `.sublime-syntax` files as highlighting [syntaxes](/docs/reference/text/raw/#parameters-syntaxes) for raw blocks
- Added support for loading `.tmTheme` files as highlighting [themes](/docs/reference/text/raw/#parameters-theme) for raw blocks
- Added _bounds_ option to [`top-edge`](/docs/reference/text/text/#parameters-top-edge) and [`bottom-edge`](/docs/reference/text/text/#parameters-bottom-edge) arguments of text function for tight bounding boxes
- Removed nonsensical top- and bottom-edge options, e.g. _ascender_ for the bottom edge **(Breaking change)**
- Added [`script`](/docs/reference/text/text/#parameters-script) argument to text function
- Added [`alternative`](/docs/reference/text/smartquote/#parameters-alternative) argument to smart quote function
- Added basic i18n for Japanese
- Added hyphenation support for `nb` and `nn` language codes in addition to `no`
- Fixed positioning of [placed elements](/docs/reference/layout/place/) in containers
- Fixed overflowing containers due to optimized line breaks

## Export

- Greatly improved export of SVG images to PDF. Many thanks to [@LaurenzV](https://github.com/LaurenzV) for their work on this.
- Added support for the alpha channel of RGBA colors in PDF export
- Fixed a bug with PPI (pixels per inch) for PNG export

## Math

- Improved layout of primes (e.g. in `$a'_1$`)
- Improved display of multi-primes (e.g. in `$a''$`)
- Improved layout of [roots](/docs/reference/math/roots/#functions-root)
- Changed relations to show attachments as [limits](/docs/reference/math/attach/#functions-limits) by default (e.g. in `$a ->^x b$`)
- Large operators and delimiters are now always vertically centered
- [Boxes](/docs/reference/layout/box/) in equations now sit on the baseline instead of being vertically centered by default. Notably, this does not affect [blocks](/docs/reference/layout/block/) because they are not inline elements.
- Added support for [weak spacing](/docs/reference/layout/h/#parameters-weak)
- Added support for OpenType character variants
- Added support for customizing the [math class](/docs/reference/math/class/) of content
- Fixed spacing around `.`, `\/`, and `...`
- Fixed spacing between closing delimiters and large operators
- Fixed a bug with math font weight selection
- Symbols and Operators **(Breaking changes)** 
  - Added `id`, `im`, and `tr` text [operators](/docs/reference/math/op/)
  - Renamed `ident` to `equiv` with alias `eq.triple` and removed `ident.strict` in favor of `eq.quad`
  - Renamed `ast.sq` to `ast.square` and `integral.sq` to `integral.square`
  - Renamed `.eqq` modifier to `.equiv` (and `.neqq` to `.nequiv`) for `tilde`, `gt`, `lt`, `prec`, and `succ`
  - Added `emptyset` as alias for `nothing`
  - Added `lt.curly` and `gt.curly` as aliases for `prec` and `succ`
  - Added `aleph`, `beth`, and `gimmel` as alias for `alef`, `bet`, and `gimel`

## Scripting

- Fields 
  - Added `abs` and `em` field to [lengths](/docs/reference/layout/length/)
  - Added `ratio` and `length` field to [relative lengths](/docs/reference/layout/relative/)
  - Added `x` and `y` field to [2d alignments](/docs/reference/layout/align/#parameters-alignment)
  - Added `paint`, `thickness`, `cap`, `join`, `dash`, and `miter-limit` field to [strokes](/docs/reference/visualize/stroke/)
- Accessor and utility methods 
  - Added [`dedup`](/docs/reference/foundations/array/#definitions-dedup) method to arrays
  - Added `pt`, `mm`, `cm`, and `inches` method to [lengths](/docs/reference/layout/length/)
  - Added `deg` and `rad` method to [angles](/docs/reference/layout/angle/)
  - Added `kind`, `hex`, `rgba`, `cmyk`, and `luma` method to [colors](/docs/reference/visualize/color/)
  - Added `axis`, `start`, `end`, and `inv` method to [directions](/docs/reference/layout/stack/#parameters-dir)
  - Added `axis` and `inv` method to [alignments](/docs/reference/layout/align/#parameters-alignment)
  - Added `inv` method to [2d alignments](/docs/reference/layout/align/#parameters-alignment)
  - Added `start` argument to [`enumerate`](/docs/reference/foundations/array/#definitions-enumerate) method on arrays
- Added [`color.mix`](/docs/reference/visualize/color/#definitions-mix) function
- Added `mode` and `scope` arguments to [`eval`](/docs/reference/foundations/eval/) function
- Added [`bytes`](/docs/reference/foundations/bytes/) type for holding large byte buffers 
  - Added [`encoding`](/docs/reference/data-loading/read/#parameters-encoding) argument to read function to read a file as bytes instead of a string
  - Added [`image.decode`](/docs/reference/visualize/image/#definitions-decode) function for decoding an image directly from a string or bytes
  - Added [`bytes`](/docs/reference/foundations/bytes/) function for converting a string or an array of integers to bytes
  - Added [`array`](/docs/reference/foundations/array/) function for converting bytes to an array of integers
  - Added support for converting bytes to a string with the [`str`](/docs/reference/foundations/str/) function

## Tooling and Diagnostics

- Added support for compiler warnings
- Added warning when compilation does not converge within five attempts due to intense use of introspection features
- Added warnings for empty emphasis (`__` and `**`)
- Improved error message for invalid field assignments
- Improved error message after single `#`
- Improved error message when a keyword is used where an identifier is expected
- Fixed parameter autocompletion for functions that are in modules
- Import autocompletion now only shows the latest package version until a colon is typed
- Fixed autocompletion for dictionary key containing a space
- Fixed autocompletion for `for` loops

## Command line interface

- Added `typst query` subcommand to execute a [query](/docs/reference/introspection/query/#command-line-queries) on the command line
- The `--root` and `--font-paths` arguments cannot appear in front of the command anymore **(Breaking change)**
- Local and cached packages are now stored in directories of the form `\{namespace\}/\{name\}/\{version\}` instead of `\{namespace\}/\{name\}-\{version\}` **(Breaking change)**
- Now prioritizes explicitly given fonts (via `--font-paths`) over system and embedded fonts when both exist
- Fixed `typst watch` not working with some text editors
- Fixed displayed compilation time (now includes export)

## Miscellaneous Improvements

- Added [`bookmarked`](/docs/reference/model/heading/#parameters-bookmarked) argument to heading to control whether a heading becomes part of the PDF outline
- Added [`caption-pos`](/docs/reference/model/figure/#definitions-caption-position) argument to control the position of a figure's caption
- Added [`metadata`](/docs/reference/introspection/metadata/) function for exposing an arbitrary value to the introspection system
- Fixed that a [`state`](/docs/reference/introspection/state/) was identified by the pair `(key, init)` instead of just its `key`
- Improved indent logic of [enumerations](/docs/reference/model/enum/). Instead of requiring at least as much indent as the end of the marker, they now require only one more space indent than the start of the marker. As a result, even long markers like `12.` work with just 2 spaces of indent.
- Fixed bug with indent logic of [`raw`](/docs/reference/text/raw/) blocks
- Fixed a parsing bug with dictionaries

## Development

- Extracted parser and syntax tree into `typst-syntax` crate
- The `World::today` implementation of Typst dependents may need fixing if they have the same [bug](https://github.com/typst/typst/issues/1842) that the CLI world had

## Contributors
